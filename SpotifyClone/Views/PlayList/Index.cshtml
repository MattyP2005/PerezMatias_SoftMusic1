@model List<SpotifyClone.Models.Playlist>

<h2>🎵 Playlists disponibles</h2>

@foreach (var playlist in Model)
{
    <div class="card mb-4 shadow-sm p-3">
        <h4>@playlist.Nombre <small class="text-muted">(por @playlist.Usuario?.Email)</small></h4>
        <p class="text-muted">Creada: @playlist.FechaCreacion.ToShortDateString()</p>

        @if (playlist.Canciones == null || !playlist.Canciones.Any())
        {
            <p>No hay canciones en esta playlist.</p>
        }
        else
        {
            <ul class="list-unstyled">
                @foreach (var item in playlist.Canciones)
                {
                    var cancion = item.Cancion;
                    var artista = cancion?.Artista;

                    <li class="mb-4 p-3 bg-dark text-white rounded shadow-sm">
                        <div class="row">
                            <div class="col-md-4">
                                @if (!string.IsNullOrEmpty(artista?.PortadaUrl))
                                {
                                    <img src="@artista.PortadaUrl" class="img-fluid rounded" alt="Portada del artista" style="max-height: 150px; object-fit: cover;" />
                                }
                                else
                                {
                                    <div class="text-center text-muted small">Sin imagen</div>
                                }
                            </div>
                            <div class="col-md-8">
                                <h5 class="text-info mb-1">@cancion?.Titulo</h5>
                                <p class="mb-2">
                                    <strong>Género:</strong> @cancion?.Genero <br />
                                    <strong>Artista:</strong> @artista?.Nombre
                                </p>
                                <audio controls src="@cancion?.Url" class="w-100"></audio>
                            </div>
                        </div>
                    </li>
                }
            </ul>
        }
    </div>
}