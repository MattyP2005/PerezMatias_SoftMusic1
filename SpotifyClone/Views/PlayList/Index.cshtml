@model List<SpotifyClone.Models.Playlist>

@{
    ViewData["Title"] = "Playlists disponibles";
}

<h2 class="mb-4 text-primary">🎧 Playlists disponibles</h2>

@if (Model == null || !Model.Any())
{
    <p class="text-muted">No hay playlists disponibles aún.</p>
}
else
{
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
        @foreach (var playlist in Model)
        {
            var portadaArtista = playlist.Canciones?
            .Select(pc => pc.Cancion?.Artista?.PortadaUrl)
            .FirstOrDefault(p => !string.IsNullOrEmpty(p)) ?? "/img/sin-portada.jpg";

            <div class="col">
                <div class="card shadow-sm playlist-card text-center">
                    <div class="img-wrapper bg-dark">
                        <img src="@portadaArtista" alt="Portada Playlist" />
                    </div>
                    <div class="card-body py-3">
                        <h6 class="card-title text-truncate mb-2">@playlist.Nombre</h6>
                        <a href="@Url.Action("Ver", "PlayList", new { id = playlist.Id })" class="btn btn-sm btn-outline-primary">
                            Ver
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
}

<style>
    .playlist-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
    }

        .playlist-card:hover {
            transform: scale(1.03);
            box-shadow: 0 0 12px rgba(0, 123, 255, 0.5);
            z-index: 10;
        }

    .img-wrapper {
        height: 160px;
        background-color: #212529;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border-bottom: 1px solid #ccc;
    }

        .img-wrapper img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }

    .card-title {
        font-weight: 600;
    }
</style>